(function(b,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(b=typeof globalThis<"u"?globalThis:b||self,e(b.VueBars={},b.Vue))})(this,function(b,e){"use strict";function w(l,t,n){n=n+1;const r=parseInt(l,16),d=parseInt(t,16),i=[],a=(r-d)/n;i.push(l);for(let o=1;o<=n;o++){const u=Math.floor(r-a*o).toString(16);i.push(u.length===1?"0"+u:u)}return i}function S(l,t,n=3){const r=l.slice(0,2),d=l.slice(2,4),i=l.slice(4,6),s=t.slice(0,2),a=t.slice(2,4),o=t.slice(4,6),u=w(r,s,n),c=w(d,a,n),h=w(i,o,n),p=[];return u.forEach((_,g)=>{p.push(""+u[g]+c[g]+h[g])}),p}function P(l,t,n){return l=l.replace("#",""),t=t.replace("#",""),S(l,t,n).map(d=>"#"+d)}function $(l,{minX:t,minY:n,maxX:r,maxY:d,minBarHeight:i},s,{max:a,min:o},u){const c=l.map(m=>typeof m=="number"?m:m.value),h=Math.min(...c,o===1/0?c.length?Math.min(...c):0:o),p=Math.max(...c,a===-1/0?c.length?Math.max(...c):0:a),_=Math.abs(p),g=Math.abs(h),j=c.length>1?(r-t-s)/(c.length-1):r-t,D=u.labelData.length>0?u.labelHeight:0;let f=0;h<0&&p<=0?f=g:h<0&&p>0?f=g+_:f=p;const B=d-n-D,y=f!==0&&B>0?B/f:1,T=h>=0&&h*y<i?0:h<0&&g*y<i?i-g*y:0,N=h<0?d-D-g*y:d-D;return c.map((m,x)=>{const q=typeof l[x]=="number"?String(l[x]):l[x].title??String(m),L=Math.abs(m)*y,k=Math.max(L-(m>=0?0:T),i);return{x:c.length>1?x*j+t:t+(r-t-s)/2,y:m>=0?N-k:N,height:k,title:q,zeroLineY:N}})}function V(l,t){const{maxX:n,gradient:r,growDuration:d}=t,i=t.barWidth??(l.length>1?n/(l.length-1)-(t.padding??5):n-t.minX-(t.padding??5)*2),s=t.rounding??2;let a=[];return r&&r.length>1&&l.length>1?a=P(r[0],r[1],l.length-1):r&&r.length>0?a=l.map(()=>r[0]):a=l.map(()=>"#000"),l.map((o,u)=>({id:`bar-id-${u}`,fill:a[u]||r[0]||"#000",x:o.x,y:o.y,width:i,height:o.height,rx:s,ry:s,title:o.title,growDuration:d}))}function W(l,t){const{labelData:n,labelRotate:r,labelColor:d,labelSize:i}=t;if(!n||n.length===0||!l.length)return[];const s=t.maxY-t.labelHeight+10;return l.map((a,o)=>{if(o>=n.length)return null;const u=n[o],c=a.x+(t.barWidth||0)-i/2;return{x:c,y:s,transformText:`rotate(${r}, ${c}, ${s})`,style:`text-anchor: end; fill:${d}; font-size:${i}px; user-select: none;`,text:u,title:a.title}}).filter(a=>a!==null)}const M={class:"container",transform:"translate(0, 0)"},z=["id","fill","x","y","width","height","rx","ry"],H=["to","dur"],Y=["from","to","dur"],E=["x","y","transform"],C=e.defineComponent({__name:"PathGroup",props:{data:{type:Array,required:!0},boundary:{type:Object,required:!0},barWidth:{type:Number,default:8},rounding:{type:Number,default:2},gradient:{type:Array,default:()=>["#000"]},growDuration:{type:Number,default:.5},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},labelProps:{type:Object,required:!0},padding:{type:Number,default:8}},setup(l){const t=l,n=e.computed(()=>{if(!t.data||t.data.length===0)return[];const i=typeof t.min=="number"?t.min:-1/0,s=typeof t.max=="number"?t.max:1/0;return $(t.data,t.boundary,t.barWidth,{max:s,min:i},t.labelProps)}),r=e.computed(()=>n.value.length?V(n.value,{gradient:t.gradient,barWidth:t.barWidth,padding:t.padding,rounding:t.rounding,growDuration:t.growDuration,...t.boundary}):[]),d=e.computed(()=>{var i;return!n.value.length||!((i=t.labelProps.labelData)!=null&&i.length)?[]:W(n.value,{labelData:t.labelProps.labelData,labelRotate:t.labelProps.labelRotate,labelColor:t.labelProps.labelColor,labelSize:t.labelProps.labelSize,labelHeight:t.labelProps.labelHeight,barWidth:t.barWidth,padding:t.padding,minX:t.labelProps.minX,minY:t.labelProps.minY,maxX:t.labelProps.maxX,maxY:t.labelProps.maxY})});return(i,s)=>(e.openBlock(),e.createElementBlock("g",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,a=>(e.openBlock(),e.createElementBlock("rect",{key:a.id,id:a.id,fill:a.fill,x:a.x,y:a.y,width:a.width,height:a.height,rx:a.rx,ry:a.ry},[e.createElementVNode("animate",{attributeName:"height",from:"0",to:a.height,dur:`${a.growDuration}s`,fill:"freeze"},null,8,H),e.createElementVNode("animate",{attributeName:"y",from:l.boundary.maxY-(t.labelProps.labelData.length>0?20:0),to:a.y,dur:`${a.growDuration}s`,fill:"freeze"},null,8,Y),e.createElementVNode("title",null,e.toDisplayString(a.title),1)],8,z))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(a,o)=>(e.openBlock(),e.createElementBlock("text",{key:`label-${o}`,class:"v-bars--label-text",style:e.normalizeStyle(a.style),x:a.x,y:a.y,transform:a.transformText},e.toDisplayString(a.text),13,E))),128))]))}}),I=["width","height","viewBox"],R={key:1},X=e.defineComponent({__name:"VueBars",props:{data:{type:Array,required:!0},barWidth:{type:Number,default:8},rounding:{type:Number,default:2},growDuration:{type:Number,default:.5},gradient:{type:Array,default:()=>["#000"]},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},minBarHeight:{type:Number,default:3},labelData:{type:Array,default:()=>[]},labelRotate:{type:Number,default:-45},labelColor:{type:String,default:"#999"},labelSize:{type:Number,default:10},labelHeight:{type:Number,default:20},height:{type:Number,default:75},width:{type:Number,default:300},padding:{type:Number,default:8},svgStyle:{type:Object,default:()=>({display:"block",overflow:"visible"})}},setup(l){const t=l,n=e.computed(()=>t.data&&t.data.length>=1),r=e.computed(()=>t.width?`${t.width}px`:"100%"),d=e.computed(()=>t.height?`${t.height}px`:"25%"),i=e.computed(()=>t.width),s=e.computed(()=>t.height),a=e.computed(()=>`0 0 ${i.value} ${s.value}`),o=e.computed(()=>({minX:t.padding,minY:t.padding,maxX:i.value-t.padding,maxY:s.value-t.padding,minBarHeight:t.minBarHeight})),u=e.computed(()=>({labelData:t.labelData,labelRotate:t.labelRotate,labelColor:t.labelColor,labelSize:t.labelSize,labelHeight:t.labelHeight,minX:o.value.minX,minY:o.value.minY,maxX:o.value.maxX,maxY:o.value.maxY}));return(c,h)=>n.value?(e.openBlock(),e.createElementBlock("svg",{key:0,width:r.value,height:d.value,viewBox:a.value,style:e.normalizeStyle(l.svgStyle),class:"vue-bars"},[e.createVNode(C,{data:t.data,boundary:o.value,barWidth:t.barWidth,rounding:t.rounding,gradient:t.gradient,growDuration:t.growDuration,max:t.max,min:t.min,labelProps:u.value,padding:t.padding},null,8,["data","boundary","barWidth","rounding","gradient","growDuration","max","min","labelProps","padding"])],12,I)):(e.openBlock(),e.createElementBlock("div",R))}});b.VueBars=X,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
