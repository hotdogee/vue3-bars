(function(e,b){typeof exports=="object"&&typeof module<"u"?module.exports=b(require("vue")):typeof define=="function"&&define.amd?define(["vue"],b):(e=typeof globalThis<"u"?globalThis:e||self,e.VueBars=b(e.Vue))})(this,function(e){"use strict";function b(l,t,n){n=n+1;const i=parseInt(l,16),d=parseInt(t,16),r=[],a=(i-d)/n;r.push(l);for(let o=1;o<=n;o++){const u=Math.floor(i-a*o).toString(16);r.push(u.length===1?"0"+u:u)}return r}function k(l,t,n=3){const i=l.slice(0,2),d=l.slice(2,4),r=l.slice(4,6),s=t.slice(0,2),a=t.slice(2,4),o=t.slice(4,6),u=b(i,s,n),c=b(d,a,n),h=b(r,o,n),p=[];return u.forEach((_,g)=>{p.push(""+u[g]+c[g]+h[g])}),p}function V(l,t,n){return l=l.replace("#",""),t=t.replace("#",""),k(l,t,n).map(d=>"#"+d)}function W(l,{minX:t,minY:n,maxX:i,maxY:d,minBarHeight:r},s,{max:a,min:o},u){const c=l.map(m=>typeof m=="number"?m:m.value),h=Math.min(...c,o===1/0?c.length?Math.min(...c):0:o),p=Math.max(...c,a===-1/0?c.length?Math.max(...c):0:a),_=Math.abs(p),g=Math.abs(h),j=c.length>1?(i-t-s)/(c.length-1):i-t,w=u.labelData.length>0?u.labelHeight:0;let f=0;h<0&&p<=0?f=g:h<0&&p>0?f=g+_:f=p;const S=d-n-w,y=f!==0&&S>0?S/f:1,q=h>=0&&h*y<r?0:h<0&&g*y<r?r-g*y:0,D=h<0?d-w-g*y:d-w;return c.map((m,x)=>{const T=typeof l[x]=="number"?String(l[x]):l[x].title??String(m),v=Math.abs(m)*y,P=Math.max(v-(m>=0?0:q),r);return{x:c.length>1?x*j+t:t+(i-t-s)/2,y:m>=0?D-P:D,height:P,title:T,zeroLineY:D}})}function $(l,t){const{maxX:n,gradient:i,growDuration:d}=t,r=t.barWidth??(l.length>1?n/(l.length-1)-(t.padding??5):n-t.minX-(t.padding??5)*2),s=t.rounding??2;let a=[];return i&&i.length>1&&l.length>1?a=V(i[0],i[1],l.length-1):i&&i.length>0?a=l.map(()=>i[0]):a=l.map(()=>"#000"),l.map((o,u)=>({id:`bar-id-${u}`,fill:a[u]||i[0]||"#000",x:o.x,y:o.y,width:r,height:o.height,rx:s,ry:s,title:o.title,growDuration:d}))}function H(l,t){const{labelData:n,labelRotate:i,labelColor:d,labelSize:r}=t;if(!n||n.length===0||!l.length)return[];const s=t.maxY-t.labelHeight+10;return l.map((a,o)=>{if(o>=n.length)return null;const u=n[o],c=a.x+(t.barWidth||0)-r/2;return{x:c,y:s,transformText:`rotate(${i}, ${c}, ${s})`,style:`text-anchor: end; fill:${d}; font-size:${r}px; user-select: none;`,text:u,title:a.title}}).filter(a=>a!==null)}const z={class:"container",transform:"translate(0, 0)"},M=["id","fill","x","y","width","height","rx","ry"],Y=["to","dur"],C=["from","to","dur"],E=["x","y","transform"],I=e.defineComponent({__name:"PathGroup",props:{data:{type:Array,required:!0},boundary:{type:Object,required:!0},barWidth:{type:Number,default:8},rounding:{type:Number,default:2},gradient:{type:Array,default:()=>["#000"]},growDuration:{type:Number,default:.5},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},labelProps:{type:Object,required:!0},padding:{type:Number,default:8}},setup(l){const t=l,n=e.computed(()=>{if(!t.data||t.data.length===0)return[];const r=typeof t.min=="number"?t.min:-1/0,s=typeof t.max=="number"?t.max:1/0;return W(t.data,t.boundary,t.barWidth,{max:s,min:r},t.labelProps)}),i=e.computed(()=>n.value.length?$(n.value,{gradient:t.gradient,barWidth:t.barWidth,padding:t.padding,rounding:t.rounding,growDuration:t.growDuration,...t.boundary}):[]),d=e.computed(()=>{var r;return!n.value.length||!((r=t.labelProps.labelData)!=null&&r.length)?[]:H(n.value,{labelData:t.labelProps.labelData,labelRotate:t.labelProps.labelRotate,labelColor:t.labelProps.labelColor,labelSize:t.labelProps.labelSize,labelHeight:t.labelProps.labelHeight,barWidth:t.barWidth,padding:t.padding,minX:t.labelProps.minX,minY:t.labelProps.minY,maxX:t.labelProps.maxX,maxY:t.labelProps.maxY})});return(r,s)=>(e.openBlock(),e.createElementBlock("g",z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,a=>(e.openBlock(),e.createElementBlock("rect",{key:a.id,id:a.id,fill:a.fill,x:a.x,y:a.y,width:a.width,height:a.height,rx:a.rx,ry:a.ry},[e.createElementVNode("animate",{attributeName:"height",from:"0",to:a.height,dur:`${a.growDuration}s`,fill:"freeze"},null,8,Y),e.createElementVNode("animate",{attributeName:"y",from:l.boundary.maxY-(t.labelProps.labelData.length>0?20:0),to:a.y,dur:`${a.growDuration}s`,fill:"freeze"},null,8,C),e.createElementVNode("title",null,e.toDisplayString(a.title),1)],8,M))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(a,o)=>(e.openBlock(),e.createElementBlock("text",{key:`label-${o}`,class:"v-bars--label-text",style:e.normalizeStyle(a.style),x:a.x,y:a.y,transform:a.transformText},e.toDisplayString(a.text),13,E))),128))]))}}),R=["width","height","viewBox"],N=e.defineComponent({__name:"VueBars",props:{data:{type:Array,required:!0},barWidth:{type:Number,default:8},rounding:{type:Number,default:2},growDuration:{type:Number,default:.5},gradient:{type:Array,default:()=>["#000"]},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},minBarHeight:{type:Number,default:3},labelData:{type:Array,default:()=>[]},labelRotate:{type:Number,default:-45},labelColor:{type:String,default:"#999"},labelSize:{type:Number,default:10},labelHeight:{type:Number,default:20},height:{type:String},width:{type:String},viewHeight:{type:Number,default:75},viewWidth:{type:Number,default:300},padding:{type:Number,default:8},svgStyle:{type:Object,default:()=>({display:"block",overflow:"visible"})}},setup(l){const t=l,n=e.computed(()=>t.data&&t.data.length>=1),i=e.computed(()=>t.width?`${t.width}`:"100%"),d=e.computed(()=>t.height?`${t.height}`:"100%"),r=e.computed(()=>t.viewWidth),s=e.computed(()=>t.viewHeight),a=e.computed(()=>`0 0 ${r.value} ${s.value}`),o=e.computed(()=>({minX:t.padding,minY:t.padding,maxX:r.value-t.padding,maxY:s.value-t.padding,minBarHeight:t.minBarHeight})),u=e.computed(()=>({labelData:t.labelData,labelRotate:t.labelRotate,labelColor:t.labelColor,labelSize:t.labelSize,labelHeight:t.labelHeight,minX:o.value.minX,minY:o.value.minY,maxX:o.value.maxX,maxY:o.value.maxY}));return(c,h)=>n.value?(e.openBlock(),e.createElementBlock("svg",{key:0,width:i.value,height:d.value,viewBox:a.value,style:e.normalizeStyle(l.svgStyle),class:"vue-bars"},[e.createVNode(I,{data:t.data,boundary:o.value,barWidth:t.barWidth,rounding:t.rounding,gradient:t.gradient,growDuration:t.growDuration,max:t.max,min:t.min,labelProps:u.value,padding:t.padding},null,8,["data","boundary","barWidth","rounding","gradient","growDuration","max","min","labelProps","padding"])],12,R)):e.createCommentVNode("",!0)}}),X=l=>{l.component("VueBars",N)},B=N;return B.install=X,B});
//# sourceMappingURL=vue3-bars.umd.cjs.map
